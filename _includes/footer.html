{% include base_path %}

<div class="page__footer-follow">
  <ul class="social-icons">
    {% if site.data.ui-text[site.locale].follow_label %}
      <li><strong>{{ site.data.ui-text[site.locale].follow_label }}</strong></li>
    {% endif %}
    {% if site.twitter.username %}
      <li><a href="https://twitter.com/{{ site.twitter.username }}"><i class="fab fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    {% endif %}
    {% if site.facebook.username %}
      <li><a href="https://facebook.com/{{ site.facebook.username }}"><i class="fab fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
    {% endif %}
    {% if site.author.github %}
      <li><a href="http://github.com/{{ site.author.github }}"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    {% endif %}
    {% if site.author.bitbucket %}
      <li><a href="http://bitbucket.org/{{ site.author.bitbucket }}"><i class="fab fa-bitbucket" aria-hidden="true"></i> Bitbucket</a></li>
    {% endif %}
    <li><a href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ base_path }}/feed.xml{% endif %}"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> {{ site.data.ui-text[site.locale].feed_label | default: "Feed" }}</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; {{ site.time | date: '%Y' }} {{ site.name | default: site.title }}. {{ site.data.ui-text[site.locale].powered_by | default: "Powered by" }} <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>




<!-- ğŸŒ— ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
<!-- ğŸŒ— é«˜çº§ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
<style>
  #theme-toggle {
    position: fixed;
    left: 50px;
    bottom: 60px;
    width: 42px;
    height: 42px;
    border: none;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 2000;
    background: #333;
    color: #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }

  #theme-toggle[data-theme="dark"]::after {
    content: "ğŸŒ™";
  }

  #theme-toggle[data-theme="light"]::after {
    content: "â˜€ï¸";
  }
</style>

<button id="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜" data-theme="dark"></button>

<script>
  const body = document.body;
  const toggle = document.getElementById("theme-toggle");
  const darkClass = "theme-dark";
  const lightClass = "theme-light";

  const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const savedTheme = localStorage.getItem("theme-mode");
  const initialTheme = savedTheme || (systemPrefersDark ? darkClass : lightClass);

  body.classList.add(initialTheme);
  toggle.setAttribute("data-theme", initialTheme === darkClass ? "dark" : "light");

  toggle.addEventListener("click", () => {
    const isDark = body.classList.contains(darkClass);
    const newTheme = isDark ? lightClass : darkClass;
    const newAttr = isDark ? "light" : "dark";

    body.classList.replace(isDark ? darkClass : lightClass, newTheme);
    toggle.setAttribute("data-theme", newAttr);
    localStorage.setItem("theme-mode", newTheme);
  });
</script>


<!-- Live2D çŒ«å’ªæ¨¡å‹ï¼šç™½çŒ« -->
<!-- Live2D æ’ä»¶ -->
<script>
  // å®šä¹‰æ¨¡å‹ JSON è·¯å¾„
  const TORORO_JSON = "https://unpkg.com/live2d-widget-model-tororo@1.0.5/assets/tororo.model.json";
  const HIJIKI_JSON = "https://unpkg.com/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json";

  const body = document.body;
  const toggle = document.getElementById("theme-toggle");
  const darkClass = "theme-dark", lightClass = "theme-light";

  const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const savedTheme = localStorage.getItem("theme-mode");
  const initialTheme = savedTheme || (systemPrefersDark ? darkClass : lightClass);

  // åº”ç”¨åˆå§‹ä¸»é¢˜
  body.classList.add(initialTheme);
  toggle.setAttribute("data-theme", initialTheme === darkClass ? "dark" : "light");

  // æ ¹æ®åˆå§‹ä¸»é¢˜åŠ è½½å¯¹åº”æ¨¡å‹
  const initialModelPath = (initialTheme === darkClass) ? TORORO_JSON : HIJIKI_JSON;
  L2Dwidget.init({
    model: { jsonPath: initialModelPath },
    display: { position: "right", width: 150, height: 300 },
    mobile: { show: true, scale: 0.5 },
    react: { opacityDefault: 0.7, opacityOnHover: 1 }
  });

  // ä¸»é¢˜åˆ‡æ¢æŒ‰é’®äº‹ä»¶
  toggle.addEventListener("click", () => {
    const isDark = body.classList.contains(darkClass);
    const newTheme = isDark ? lightClass : darkClass;
    const newAttr = isDark ? "light" : "dark";

    // åˆ é™¤æ—§çš„Live2Dæ¨¡å‹å…ƒç´ ï¼ˆé˜²æ­¢é‡å¤åŠ è½½ï¼‰ [oai_citation:12â€¡blog.csdn.net](https://blog.csdn.net/weixin_43073383/article/details/136685150#:~:text=showLive2d%28name%3A%20String%29%20,Live2D%20widget%20element%20not%20found)
    const oldWidget = document.getElementById("live2d-widget");
    if (oldWidget) oldWidget.remove();

    // æ ¹æ®æ–°ä¸»é¢˜é€‰æ‹©æ¨¡å‹è·¯å¾„ [oai_citation:13â€¡cnblogs.com](https://www.cnblogs.com/kmust/p/12215959.html#:~:text=Image)
    const newModelPath = (newTheme === darkClass) ? TORORO_JSON : HIJIKI_JSON;
    // é‡æ–°åˆå§‹åŒ–Live2Dçœ‹æ¿å¨˜ [oai_citation:14â€¡juejin.cn](https://juejin.cn/post/7125689793979088933#:~:text=function%20show%28obj%29%20,obj%2B%22%401.0.5%2Fassets%2F%22%2Bobj%2B%22.model.json%22%3B%20L2Dwidget.init%28config)
    L2Dwidget.init({
      model: { jsonPath: newModelPath },
      display: { position: "right", width: 150, height: 300 },
      mobile: { show: true, scale: 0.5 },
      react: { opacityDefault: 0.7, opacityOnHover: 1 }
    });

    // åˆ‡æ¢é¡µé¢ä¸»é¢˜ç±»å’ŒæŒ‰é’®å›¾æ ‡
    body.classList.replace(isDark ? darkClass : lightClass, newTheme);
    toggle.setAttribute("data-theme", newAttr);
    localStorage.setItem("theme-mode", newTheme);
  });
</script>

