{% include base_path %}

<div class="page__footer-follow">
  <ul class="social-icons">
    {% if site.data.ui-text[site.locale].follow_label %}
      <li><strong>{{ site.data.ui-text[site.locale].follow_label }}</strong></li>
    {% endif %}
    {% if site.twitter.username %}
      <li><a href="https://twitter.com/{{ site.twitter.username }}"><i class="fab fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    {% endif %}
    {% if site.facebook.username %}
      <li><a href="https://facebook.com/{{ site.facebook.username }}"><i class="fab fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
    {% endif %}
    {% if site.author.github %}
      <li><a href="http://github.com/{{ site.author.github }}"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    {% endif %}
    {% if site.author.bitbucket %}
      <li><a href="http://bitbucket.org/{{ site.author.bitbucket }}"><i class="fab fa-bitbucket" aria-hidden="true"></i> Bitbucket</a></li>
    {% endif %}
    <li><a href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ base_path }}/feed.xml{% endif %}"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> {{ site.data.ui-text[site.locale].feed_label | default: "Feed" }}</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; {{ site.time | date: '%Y' }} {{ site.name | default: site.title }}. {{ site.data.ui-text[site.locale].powered_by | default: "Powered by" }} <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>




<!-- 🌗 主题切换按钮 -->
<!-- 🌗 高级主题切换按钮 -->
<style>
  #theme-toggle {
    position: fixed;
    left: 50px;
    bottom: 60px;
    width: 42px;
    height: 42px;
    border: none;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 2000;
    background: #333;
    color: #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }

  #theme-toggle[data-theme="dark"]::after {
    content: "🌙";
  }

  #theme-toggle[data-theme="light"]::after {
    content: "☀️";
  }
</style>

<button id="theme-toggle" title="切换主题" data-theme="dark"></button>

<script>
  const body = document.body;
  const toggle = document.getElementById("theme-toggle");
  const darkClass = "theme-dark";
  const lightClass = "theme-light";
  
  // 检测系统主题或本地存储主题
  const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const savedTheme = localStorage.getItem("theme-mode");
  const initialTheme = savedTheme || (systemPrefersDark ? darkClass : lightClass);

  body.classList.add(initialTheme);
  toggle.setAttribute("data-theme", initialTheme === darkClass ? "dark" : "light");

  // 定义模型 JSON 路径
  const modelTororo = "https://cdn.jsdelivr.net/npm/live2d-widget-model-tororo@1.0.5/assets/tororo.model.json";
  const modelHijiki = "https://cdn.jsdelivr.net/npm/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json";

  // 加载 Live2D 模型的辅助函数
  function loadLive2DModel(jsonPath) {
    // 移除已有容器（默认ID为 live2d-widget） [oai_citation:5‡l2dwidget.js.org](https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#:~:text=userConfig)
    const existing = document.getElementById('live2d-widget');
    if (existing) existing.remove();

    // 调用 L2Dwidget.init 加载新模型（参数结构参考官方文档 [oai_citation:6‡l2dwidget.js.org](https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#:~:text=User%27s%20custom%20config%20%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AE%BE%E7%BD%AE)）
    L2Dwidget.init({
      model: {
        jsonPath: jsonPath
      },
      display: {
        position: "right",
        width: 150,
        height: 300
      },
      mobile: {
        show: true,
        scale: 0.5
      },
      react: {
        opacityDefault: 0.7,
        opacityOnHover: 1
      }
    });
  }

  // 初始加载对应主题的模型
  const initialModelPath = (initialTheme === darkClass) ? modelTororo : modelHijiki;
  loadLive2DModel(initialModelPath);

  // 主题切换按钮事件：切换主题并更新模型
  toggle.addEventListener("click", () => {
    const isDark = body.classList.contains(darkClass);
    const newTheme = isDark ? lightClass : darkClass;
    const newAttr = isDark ? "light" : "dark";

    // 更新主题类和按钮图标
    body.classList.replace(isDark ? darkClass : lightClass, newTheme);
    toggle.setAttribute("data-theme", newAttr);
    localStorage.setItem("theme-mode", newTheme);

    // 根据新主题加载对应模型（暗主题加载 Tororo，亮主题加载 Hijiki） [oai_citation:7‡greasyfork.org](https://greasyfork.org/en/scripts/432971-%E8%83%8C%E6%99%AF%E5%8A%A8%E7%94%BB/code#:~:text=const%20modelList%20%3D%20,email)
    const modelPath = (newTheme === darkClass) ? modelTororo : modelHijiki;
    loadLive2DModel(modelPath);
  });
</script>

<!-- Live2D 插件 -->
<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js"></script>

